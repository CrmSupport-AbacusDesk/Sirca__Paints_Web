<div class="main-container" >
  <div *ngIf="loader">
    <mat-spinner class="loader">
      <div><p>Loading....</p></div>
    </mat-spinner>
  </div>
  <div class="middle-container">
    <div class="page-heading">
      <div class="heading-text bc-space">
        <div class="back-btn">
          <a mat-button routerLink="/sale-user-list" routerLinkActive="active"><i class="material-icons">arrow_right_alt</i></a>
        </div>
        <h2>User Detail1</h2>
        <!-- <button routerLink="/sale-user-target/{{detail.id}}" routerLinkActive="active" >User Target</button> -->
        <!-- <p class="light">{{detail.user_type}}</p> -->
      </div>
    </div>


    <div class="target">
      <div class="pagination">
        <!-- <ul>
          <li (click)="previousYear()" ><i class="material-icons">keyboard_arrow_left</i></li>
          <li><h3>Year {{targets[0]['financial_year']}}</h3></li>
          <li (click)="nextYear()"><i class="material-icons">keyboard_arrow_right</i></li>
        </ul> -->

        <div class="target-btn" *ngIf="detail.user_type == 'MARKET' || detail.user_type == 'Market'">
          <!-- <button mat-button  routerLink="/sale-user-target/{{detail.id}}" routerLinkActive="active">My Target</button> -->
        </div>
      </div>
    </div>
    <!-- <div class="tabs right-tab">
      <ul>
        <li><a routerLink="/sale-user-detail/{{detail.id}}" routerLinkActive="active">DETAIL</a></li>
        <li><a routerLink="/my-network/{{detail.id}}" routerLinkActive="active">My Network</a></li>
        <li><a>ORDERS</a></li>
        <li><a routerLink="/user-lead-list/{{detail.id}}" routerLinkActive="active">LEADS</a></li>
        <li><a>FOLLOWUP</a></li>
      </ul>
    </div> -->
  </div>


  <div class="container-outer">
    <div class="container" >
      <div class="row">
        <div class="col s12">
          <div class="details-info">
            <!-- <div class="img-box">
              <img src="../assets/img/user.png">
            </div> -->
            <div class="basic-details">
              <div class="profile-info">
                <ul>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/people.svg" class="fix-img">
                      <span>Name</span>
                      <p class="link-clr">{{detail.name}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.name,'name')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/company.svg" class="fix-img">
                      <span>Type</span>
                      <p >{{detail.user_type}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.user_type,'user_type')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/designation.svg" class="fix-img">
                      <span>Designation</span>
                      <p>{{detail.designation}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.access_level,'access_level')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/gmail.svg" class="fix-img">
                      <span>Email</span>
                      <p>{{detail.email}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.email,'email')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                </ul>
                <ul *ngIf="detail.user_type == 'Market'">
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/people.svg" class="fix-img">
                      <span> Bank Name</span>
                      <p>{{detail.bank_name}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.bank_name,'bank_name')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/company.svg" class="fix-img">
                      <span>Account No.</span>
                      <p >{{detail.account_no}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.account_no,'account_no')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/designation.svg" class="fix-img">
                      <span>IFSC code</span>
                      <p>{{detail.ifsc}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.ifsc,'ifsc')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/gmail.svg" class="fix-img">
                      <span>Account Holder Name</span>
                      <p>{{detail.account_name}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.account_name,'account_name')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                </ul>
                <ul>

                  <li  class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/phone.svg" class="fix-img">
                      <span>Mobile no</span>
                      <p>{{detail.contact_01}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.contact_01,'contact_01')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <!-- <li  class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/phone.svg" class="fix-img">
                      <span></span>
                      <p>{{detail.contact_01}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.contact_01,'contact_01')"><i class="material-icons">create</i></a>
                    </div>
                  </li> -->
                  <li  class="col s4" *ngIf="detail.user_type != 'Ware House'">
                    <div class="cs-box">
                      <img src="assets/img/building.svg" class="fix-img">
                      <span>Working State</span>
                      <p>{{detail.state_name}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.state_name,'working_state')"><i class="material-icons">create</i></a>
                    </div>
                  </li>

                  <li  class="col s4" *ngIf="detail.user_type == 'Ware House' && detail.access_level == '16'">
                    <div class="cs-box">
                      <img src="assets/img/warehouse.svg" class="fix-img">
                      <span>Warehouse</span>
                      <p>{{detail.ware_house_name && detail.ware_house_name!='' ? detail.ware_house_name : '--'}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openWareHouseEditDialog(detail.ware_house_id,'ware_house_name')"><i class="material-icons">create</i></a>
                    </div>
                  </li>

                  <li  class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/building.svg" class="fix-img">
                      <span>Employee Code</span>
                      <p>{{detail.employee_id}}</p>
                      <!-- <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.employee_id,'employeeCode')"><i class="material-icons">create</i></a> -->
                    </div>
                  </li>

                  <li class="col s4" *ngIf="detail.user_type == 'office' || detail.user_type == 'OFFICE' || detail.user_type == 'Office' || detail.user_type=='Inside Sales Team'">
                    <div class="cs-box">
                      <img src="assets/img/man.svg" class="fix-img">
                      <span>Username</span>
                      <p >{{detail.username}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.username,'username')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                  <li class="col s4" *ngIf="detail.user_type == 'office' || detail.user_type == 'OFFICE' || detail.user_type == 'Office' || detail.user_type=='Inside Sales Team'">
                    <div class="cs-box">
                      <img src="assets/img/password.svg" class="fix-img">
                      <span>Password</span>
                      <p >{{detail.password}}</p>
                      <a  class="edit-icon" color="accent" matRipple matTooltip="EDIT" (click)="openEditDialog(detail.password,'password')"><i class="material-icons">create</i></a>
                    </div>
                  </li>
                </ul>

                <ul>

                  <li  class="col s4">
                    <div class="cs-box">
                      <img src="assets/img/phone.svg" class="fix-img">
                      <span>Created By</span>
                      <p>{{detail.created_by_name && detail.created_by_name != ''?detail.created_by_name :'--' }}</p>
                       </div>
                  </li>
                  <li  class="col s4" *ngIf="(detail.updated_at != '0000-00-00 00:00:00')">
                    <div class="cs-box">
                      <img src="assets/img/phone.svg" class="fix-img">
                      <span>Last Update Date</span>
                      <p>{{detail.updated_at != '0000-00-00 00:00:00'?(detail.updated_at | date : 'MMM d, y') :'Not Yet Updated' }}</p>
                       </div>
                  </li>
                  <li  class="col s4" *ngIf="(detail.last_updated_by_name)">
                    <div class="cs-box">
                      <img src="assets/img/people.svg" class="fix-img">
                      <span>Last Update By</span>
                      <p>{{detail.last_updated_by_name?detail.last_updated_by_name:'Not Yet Updated'}}</p>
                      </div>
                  </li>
                </ul>
              </div>

              <div class="col s6 cs-figure">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <form (ngSubmit)="updateDetail()">
          <div class="col s8">
            <div class="sprate-box padding0">
              <a  class="edit-item" matTooltip="EDIT" color="accent" (click)="editaddress()"><i class="material-icons">edit</i></a>
              <div class="full-address">
                <div class="top-heading">
                  <h2>ADDRESS</h2>
                </div>
                <div class="nationality">
                  <img src="assets/img/india.svg" alt="">
                  <p>India</p>
                </div>

                <div class="ds-from-fields">
                  <div class="cs-row">
                    <div class="static-info">
                      <p>address</p>
                      <p>{{detail.street}}</p>
                    </div>
                  </div>

                  <div class="cs-row">
                    <div class="static-info">
                      <p>State</p>
                      <p>{{detail.permanent_address_state}}</p>
                    </div>
                    <div class="static-info">
                      <p>District</p>
                      <p>{{detail.district_name}}</p>
                    </div>
                    <div class="static-info">
                      <p>City</p>
                      <p>{{detail.city}}</p>
                    </div>
                    <div class="static-info">
                      <p>Pin Code</p>
                      <p>{{detail.pincode}}</p>
                    </div>

                    <div class="static-info">
                      <p>Channel Partner</p>
                      <p>{{detail.channel_partner}}</p>
                    </div>


                  </div>

                </div>
              </div>
            </div>


            <div class="row">
              <div class="col s12">
                <div class="cs-btn fixedd mt32 text-right">
                  <!-- <div class="in-btn">
                    <button mat-raised-button color="accent" type="save">Save</button>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
        </form>


        <div class="col s4" *ngIf="team_update==true">
          <div class="territory-info">
            <div class="head" [ngClass]="{'active':active.user==true}">
              <h2>Reporting Manager</h2>
              <i class="material-icons search-icon right20" (click)="toggleterritory('user','open')"  matRipple>search</i>
              <input type="text" placeholder="search..." name="sales_executive" class="fix-search" (input)="getItemsList(search.sales_executive)" #sales_executive="ngModel" [(ngModel)]="search.sales_executive">
              <i class="material-icons close-icon" (click)="toggleterritory('user','close')" matRipple>clear</i>
            </div>

            <div class="cs-logs">
              <div class="cs-checkbox">
                <div class="checkbox-outer">
                  <section class="checkbox-inner"   >
                    <ng-container *ngFor="let list of rsm_list;let index=index" aria-required="true">
                      <mat-checkbox class="check-list" [checked]="list.check" (change)="product_Brand(list.id,index,$event)" value="{{list.name}}">{{list.name}} | {{list.role_name}}</mat-checkbox>
                    </ng-container>
                  </section>
                </div>
              </div>

            </div>

            <div class="col s12">
              <div class="cs-btn  text-right pb15">
                <div class="in-btn">
                  <button mat-raised-button color="accent" (click)="update_assignusers()">Update</button>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="col s4" *ngIf="detail.user_type != 'Ware House'">
          <!-- <button (click)="edit_assigned_team()">test</button> -->
          <div class="sprate-box padding0" *ngIf="team_update==false">
            <a class="edit-item" matTooltip="EDIT" color="accent" (click)="edit_assigned_team()"><i class="material-icons">edit</i></a>
            <div class="full-address">
              <div class="top-heading">
                <h2>Reporting Manager</h2>
              </div>
              <div class="cs-table">
                <div class="table-head">
                  <table>
                    <tr>
                      <th>Name</th>
                      <th class="w100">Designation  </th>
                    </tr>
                  </table>
                </div>
                <div class="table-container">
                  <div class="table-content">
                    <table>
                      <tr *ngFor="let team of detail['assign_user']">
                        <td>{{team.name}}</td>
                        <td class="w100">{{team.role_name}}</td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--
          <div  class="col s4 pl0" *ngIf="team_update==true">
            <div class="control-field">
              <h1>Reporting Manager</h1>
              <input type="text" placeholder="search..." name="sales_executive" class="fix-search" (input)="getItemsList(search.sales_executive)" #sales_executive="ngModel" [(ngModel)]="search.sales_executive">
              <div class="cs-checkbox">
                <div class="checkbox-outer">
                  <section class="checkbox-inner"  *ngFor="let list of rsm_list;let index=index" aria-required="true" >
                    <mat-checkbox class="check-list" [checked]="list.check" (change)="product_Brand(list.id,index,$event)" value="{{list.name}}">{{list.name}} | {{list.role_name}}</mat-checkbox>
                  </section>
                </div>
              </div>

            </div>
            <button (click)="update_assignusers()">Update</button>
          </div> -->

          <div class="col s4">
            <div class="sprate-box padding0">
              <!-- <div class="cs-logs">
                <div class="top-heading">
                  <h2>CALL LOGS</h2>
                </div>
                <div class="logs-outer">
                  <div class="logs-list">
                    <ul>
                      <li>
                        <div class="name">
                          Hemant Rajput
                        </div>
                        <div class="date">
                          <img src="../assets/img/clock.svg" class="mr10">
                          12 Oct 2018 | 11:45 AM
                        </div>
                        <p>
                          <strong>Call</strong> : Sed ut perspiciatis unde omnis iste
                          natus error sit voluptatem accusantium
                          doloremque laudantium, totam rem aperiam,
                          eaque ipsa quae
                        </p>
                      </li>
                      <li>
                        <div class="name">
                          Hemant Rajput
                        </div>
                        <div class="date">
                          <img src="../assets/img/clock.svg" class="mr10">
                          12 Oct 2018 | 11:45 AM
                        </div>
                        <p>
                          <strong>Call</strong> : Sed ut perspiciatis unde omnis iste
                          natus error sit voluptatem accusantium
                          doloremque laudantium, totam rem aperiam,
                          eaque ipsa quae
                        </p>
                      </li>
                      <li>
                        <div class="name">
                          Hemant Rajput
                        </div>
                        <div class="date">
                          <img src="../assets/img/clock.svg" class="mr10">
                          12 Oct 2018 | 11:45 AM
                        </div>
                        <p>
                          <strong>Call</strong> : Sed ut perspiciatis unde omnis iste
                          natus error sit voluptatem accusantium
                          doloremque laudantium, totam rem aperiam,
                          eaque ipsa quae
                        </p>
                      </li>
                      <li>
                        <div class="name">
                          Hemant Rajput
                        </div>
                        <div class="date">
                          <img src="../assets/img/clock.svg" class="mr10">
                          12 Oct 2018 | 11:45 AM
                        </div>
                        <p>
                          <strong>Call</strong> : Sed ut perspiciatis unde omnis iste
                          natus error sit voluptatem accusantium
                          doloremque laudantium, totam rem aperiam,
                          eaque ipsa quae
                        </p>
                      </li>
                      <li>
                        <div class="name">
                          Hemant Rajput
                        </div>
                        <div class="date">
                          <img src="../assets/img/clock.svg" class="mr10">
                          12 Oct 2018 | 11:45 AM
                        </div>
                        <p>
                          <strong>Call</strong> : Sed ut perspiciatis unde omnis iste
                          natus error sit voluptatem accusantium
                          doloremque laudantium, totam rem aperiam,
                          eaque ipsa quae
                        </p>
                      </li>
                    </ul>
                  </div>
                </div>
              </div> -->
            </div>
          </div>
        </div>

        <div class="row mt15" *ngIf="detail.user_type == 'OFFICE' || detail.user_type == 'office' || detail.user_type =='Office'">
          <!-- <div class="col s4">
            <div class="territory-info">
              <div class="head" [ngClass]="{'active':active.branch==true}">
                <h2>Assign Modules</h2>

              </div>
              <div class="cs-checkbox" >
                <div class="checkbox-outer">
                  <section class="checkbox-inner" >
                    <mat-checkbox class="check-list" (change)="assign_module('view_dashboard',$event)" [checked]="detail.view_dashboard">
                      Dashboard
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('view_leads',$event)" [checked]="detail.view_leads">
                      Leads
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('view_distribution_n_w',$event)" [checked]="detail.view_distribution_n_w">
                      Distribution Network
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('view_orders',$event)" [checked]="detail.view_orders">
                      Orders
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('view_attendence',$event)" [checked]="detail.view_attendence">
                      Attendance
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('view_check_in',$event)" [checked]="detail.view_check_in">
                      Check-In
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('qr_code',$event)" [checked]="detail.view_qr_code">
                      OR CODE
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('plumbing_man',$event)" [checked]="detail.view_plumbing_man">
                      Plumbing Man
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('consumer',$event)" [checked]="detail.view_consumer">
                      Consumer
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('banner',$event)" [checked]="detail.view_banner">
                      Banner
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('view_leaves',$event)" [checked]="detail.view_leaves">
                      Leaves
                    </mat-checkbox>
                    <mat-checkbox class="check-list" (change)="assign_module('view_travel_plan',$event)" [checked]="detail.view_travel_plan">
                      Travel Plan
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('category_master',$event)" [checked]="detail.view_category_master">
                      Category Master
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('scheme_master',$event)" [checked]="detail.view_scheme_master">
                      Scheme Master
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('report',$event)" [checked]="detail.view_report">
                      Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('user_location_report',$event)" [checked]="detail.view_user_location_report">
                      User Location Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('daily_work_report',$event)" [checked]="detail.view_daily_work_report">
                      Daily Work Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('monthly_work_report',$event)" [checked]="detail.view_monthly_work_report">
                      Monthly Work Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('primary_target_report',$event)" [checked]="detail.view_primary_target_report">
                      Primary Target Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('secondary_target_report',$event)" [checked]="detail.view_secondary_target_report">
                      Secondary Target Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('primary_secondary_report',$event)" [checked]="detail.view_primary_secondary_report">
                      Primary Vs Secondary Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('c_p_sales_report',$event)" [checked]="detail.view_c_p_sales_report">
                      C P Sales Report
                    </mat-checkbox>

                    <mat-checkbox class="check-list" (change)="assign_module('product_category_report',$event)" [checked]="detail.view_product_category_report">
                      Product & Category Report
                    </mat-checkbox>

                  </section>
                </div>
              </div>
            </div>
          </div> -->

          <div class="left-right-15">
            <div class="cs-table">
              <div class="stickyHead">

                <div class="table-head">
                  <table>
                    <tr>
                      <th class="w50">S.No.</th>
                      <th >Module Name</th>
                      <th class="w120 text-center" >View</th>
                      <th class="w120 text-center">Edit</th>
                      <th  class="w120 text-center">Delete</th>
                      <th class="w120 text-center">Add</th>
                    </tr>
                  </table>
                </div>
              </div>

              <div class="table-container">
                <div class="table-content">
                  <table>
                    <tr *ngFor="let data of assign_module_data; let i = index">
                      <td class="w50">{{i+1}}</td>
                      <td >{{data.module_name == 'distribution dealer' ? 'Distributor Retail Partners' : (data.module_name == 'lead dealer' ? 'Lead Retail Partners' : data.module_name )  }}</td>
                      <td class="w120 text-center">
                        <mat-checkbox *ngIf="data.view!= '' &&  data.view  == false || data.view  == 'false' || data.view  == 'true' || data.view  == true" [checked]="data.view== 'true'" (change)="assign_module('view',$event,i)"></mat-checkbox>
                        <mat-checkbox *ngIf="data.view== ''" [disabled]=true></mat-checkbox>

                      </td>
                      <td class="w120 text-center">
                        <mat-checkbox *ngIf="data.edit!= '' &&  data.edit  == false || data.edit  == 'false' || data.edit  == 'true' || data.edit  == true"  [checked]="data.edit== 'true'" (change)="assign_module('edit',$event,i)"></mat-checkbox>
                        <mat-checkbox *ngIf="data.edit== ''" [disabled]=true [indeterminate]=true></mat-checkbox>

                      </td>


                      <td class="w120 text-center">
                        <mat-checkbox *ngIf="data.delete!= '' &&  data.delete  == false || data.delete  == 'false' || data.delete  == 'true' || data.delete  == true" [checked]="data.delete== 'true'" (change)="assign_module('delete',$event,i)"></mat-checkbox>
                        <mat-checkbox *ngIf="data.delete== ''" [disabled]=true [indeterminate]=true></mat-checkbox>

                      </td>
                      <td class="w120 text-center">
                        <mat-checkbox *ngIf="data.add!= '' &&  data.add  == false || data.add  == 'false' || data.add  == 'true' || data.add  == true" [checked]="data.add== 'true'" (change)="assign_module('add',$event,i)"></mat-checkbox>
                        <mat-checkbox *ngIf="data.add== ''" [disabled]=true [indeterminate]=true></mat-checkbox>

                      </td>


                    </tr>
                  </table>

                </div>
              </div>

            </div>
        </div>



        </div>



      </div>
    </div>


  </div>

  <div class="h50"></div>

